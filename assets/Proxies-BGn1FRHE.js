import{ap as Oe,o as Pe,aq as Be,ar as Ae,as as he,L as He,at as Re,A as le,N as je,u as ne,d as e,au as Fe,i as n,ac as M,av as Ue,aw as We,D as w,ax as ze,ay as Ye,F as H,az as Ke,aA as Ve,aB as Qe,aC as Xe,aD as Y,aE as Ze,aF as qe,g as y,aG as Je,aH as Ge,aI as et,aJ as ae,aK as Se,aL as Te,aM as te,aN as re,aO as ce,Q as tt,t as m,aP as rt,aQ as me,S as P,aR as k,aS as Le,aT as de,a0 as K,$ as Ne,aa as Ee,H as oe,E as nt,W as it,aU as st,K as lt,b as at,y as ct,R as ot,T as dt,B as q,a3 as ut,aV as gt,aW as fe,aX as vt,aY as pe,aZ as be,m as ht}from"./index-8p10MaTT.js";import{D as mt}from"./DocumentTitle-Btytyu39.js";import{f as ft}from"./time-DuOqfXk_.js";import{I as xe}from"./IconReload-exPOFyzA.js";function ye(i){const t={...i},r={...i},l={},u=a=>{let h=l[a];if(!h){if(!Re())return t[a];l[a]=h=le(t[a],{internal:!0}),delete t[a]}return h[0]()};for(const a in i)Object.defineProperty(r,a,{get:()=>u(a),enumerable:!0});const c=(a,h)=>{const o=l[a];if(o)return o[1](h);a in t&&(t[a]=he(h,[t[a]]))};return[r,(a,h)=>{if(Be(a)){const o=Ae(()=>Object.entries(he(a,r)));He(()=>{for(const[S,b]of o)c(S,()=>b)})}else c(a,h);return r}]}function pt(i,t){if(Oe.context){const[r,l]=ye(i);return Pe(()=>l(t())),[r,l]}return ye(t())}/**
 * @license @tabler/icons-solidjs v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var we=je("outline","brand-speedtest","IconBrandSpeedtest",[["path",{d:"M5.636 19.364a9 9 0 1 1 12.728 0"}],["path",{d:"M16 9l-4 4"}]]),bt=m('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full"></select></div><div><input type=number class="input input-bordered w-full"><input type=number class="input input-bordered w-full">'),xt=m('<option class="flex items-center gap-2">'),yt=m("<option>");const wt=i=>{const[t]=ne();return e(tt,{ref:r=>{var l;return(l=i.ref)==null?void 0:l.call(i,r)},get icon(){return e(Fe,{size:24})},get title(){return t("proxiesSettings")},get children(){var r=bt(),l=r.firstChild,u=l.firstChild,c=u.firstChild,a=l.nextSibling,h=a.firstChild,o=a.nextSibling,S=o.firstChild,b=o.nextSibling,$=b.firstChild,T=b.nextSibling,O=T.firstChild,x=O.firstChild,L=T.nextSibling,B=L.firstChild,_=B.firstChild,E=L.nextSibling,R=E.firstChild,V=E.nextSibling,U=V.firstChild,Q=U.nextSibling;return n(l,e(M,{withDivider:!0,get children(){return t("autoCloseConns")}}),u),c.addEventListener("change",v=>Ue(v.target.checked)),n(a,e(M,{withDivider:!0,get children(){return t("urlForLatencyTest")}}),h),h.addEventListener("change",v=>We(v.target.value)),n(o,e(M,{withDivider:!0,get children(){return[w(()=>t("latencyTestTimeoutDuration"))," (",w(()=>t("ms")),")"]}}),S),S.addEventListener("change",v=>ze(Number(v.target.value))),n(b,e(M,{withDivider:!0,get children(){return t("proxiesSorting")}}),$),$.addEventListener("change",v=>Ye(v.target.value)),n($,e(H,{get each(){return Object.values(Ke)},children:v=>(()=>{var D=xt();return D.value=v,n(D,()=>t(v)),D})()})),n(T,e(M,{withDivider:!0,get children(){return t("hideUnavailableProxies")}}),O),x.addEventListener("change",v=>Ve(v.target.checked)),n(L,e(M,{withDivider:!0,get children(){return t("renderInTwoColumns")}}),B),_.addEventListener("change",v=>Qe(v.target.checked)),n(E,e(M,{withDivider:!0,get children(){return t("proxiesPreviewType")}}),R),R.addEventListener("change",v=>Xe(v.target.value)),n(R,e(H,{get each(){return Object.values(Y)},children:v=>(()=>{var D=yt();return D.value=v,n(D,()=>t(v)),D})()})),n(V,e(M,{withDivider:!0,get children(){return t("iconHeight")}}),U),U.addEventListener("change",v=>Ze(Number(v.target.value))),n(V,e(M,{withDivider:!0,get children(){return t("iconMarginRight")}}),Q),Q.addEventListener("change",v=>qe(Number(v.target.value))),y(()=>c.checked=Je()),y(()=>h.value=Ge()),y(()=>S.value=et()),y(()=>$.value=ae()),y(()=>x.checked=Se()),y(()=>_.checked=Te()),y(()=>R.value=te()),y(()=>U.value=re()),y(()=>Q.value=ce()),r}})},$e=i=>{const t=()=>te()===Y.OFF,r=w(()=>i.proxyNameList.length<=10),l=w(()=>{const c=te();return c===Y.BAR||c===Y.Auto&&!r()}),u=w(()=>{const c=te();return c===Y.DOTS||c===Y.Auto&&r()});return e(P,{get when(){return!t()},get children(){return e(rt,{get children(){return[e(me,{get when(){return l()},get children(){return e(_t,{get proxyNameList(){return i.proxyNameList},get now(){return i.now}})}}),e(me,{get when(){return u()},get children(){return e(Tt,{get proxyNameList(){return i.proxyNameList},get now(){return i.now}})}})]}})}})};var $t=m('<div class="flex items-center gap-2 py-2"><div class="my-1 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>');const _t=i=>{const{getLatencyByName:t}=de(),r=w(()=>i.proxyNameList.map(o=>t(o))),l=w(()=>r().length),u=w(()=>r().filter(o=>o>k().NOT_CONNECTED&&o<=k().MEDIUM).length),c=w(()=>r().filter(o=>o>k().MEDIUM&&o<=k().HIGH).length),a=w(()=>r().filter(o=>o>k().HIGH).length),h=w(()=>r().filter(o=>o===k().NOT_CONNECTED).length);return(()=>{var o=$t(),S=o.firstChild,b=S.firstChild,$=b.nextSibling,T=$.nextSibling,O=T.nextSibling;return n(o,e(P,{get when(){return i.now},get children(){return e(Le,{get proxyName(){return i.now}})}}),null),y(x=>{var L=`${u()*100/l()}%`,B=`${c()*100/l()}%`,_=`${a()*100/l()}%`,E=`${h()*100/l()}%`;return L!==x.e&&((x.e=L)!=null?b.style.setProperty("width",L):b.style.removeProperty("width")),B!==x.t&&((x.t=B)!=null?$.style.setProperty("width",B):$.style.removeProperty("width")),_!==x.a&&((x.a=_)!=null?T.style.setProperty("width",_):T.style.removeProperty("width")),E!==x.o&&((x.o=E)!=null?O.style.setProperty("width",E):O.style.removeProperty("width")),x},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()};var Ct=m("<div>"),Pt=m('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">');const St=i=>{let t=i.selected?"bg-white border-4 border-success":"bg-success";return typeof i.latency!="number"||i.latency===k().NOT_CONNECTED?t=i.selected?"bg-white border-4 border-neutral":"bg-neutral":i.latency>k().HIGH?t=i.selected?"bg-white border-4 border-error":"bg-error":i.latency>k().MEDIUM&&(t=i.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{var r=Ct();return y(l=>{var u=K("h-4 w-4 rounded-full",t),c=i.name;return u!==l.e&&Ne(r,l.e=u),c!==l.t&&Ee(r,"title",l.t=c),l},{e:void 0,t:void 0}),r})()},Tt=i=>{const{getLatencyByName:t}=de();return(()=>{var r=Pt(),l=r.firstChild;return n(l,e(H,{get each(){return i.proxyNameList.map(u=>[u,t(u)])},children:([u,c])=>e(St,{name:u,latency:c,get selected(){return i.now===u}})})),n(r,e(P,{get when(){return i.now},get children(){return e(Le,{get proxyName(){return i.now}})}}),null),r})()};var Lt=m("<progress class=progress max=100>"),Nt=m('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),Et=m('<div class="text-sm text-slate-500">: ');const Dt=i=>{const{Download:t=0,Upload:r=0,Total:l=0,Expire:u=0}=i,c=oe(l,{units:"iec"}),a=oe(t+r,{units:"iec"}),h=nt.toFinite(((t+r)/l*100).toFixed(2));return{total:c,used:a,percentage:h,expirePrefix:()=>{const[b]=ne();return b("expire")},expireStr:()=>{const[b]=ne();return u===0?b("noExpire"):it(u*1e3).format("YYYY-MM-DD")}}},It=i=>{if(!i.subscriptionInfo)return;const t=Dt(i.subscriptionInfo);return[(()=>{var r=Lt();return y(()=>r.value=t.percentage),r})(),(()=>{var r=Nt(),l=r.firstChild,u=l.nextSibling,c=u.nextSibling,a=c.nextSibling;return a.nextSibling,n(r,()=>`${t.used}`,l),n(r,()=>`${t.total}`,u),n(r,()=>t.percentage,a),r})(),(()=>{var r=Et(),l=r.firstChild;return n(r,()=>t.expirePrefix(),l),n(r,()=>t.expireStr(),null),r})()]};var Mt={width:0,height:0};function _e(){return{width:window.innerWidth,height:window.innerHeight}}function kt(){const[i,t]=pt(Mt,_e);return st(window,"resize",()=>t(_e())),i}var Ot=m("<div class=mb-2>"),Bt=m('<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>'),At=m('<div class="grid grid-cols-1 place-items-start gap-2">');const Ce=i=>{const t=kt(),r=w(()=>t.width>480);return()=>{const l=lt(()=>i.children),u=c=>{var a;return(a=l())==null?void 0:a.filter((h,o)=>o%2===c).map(h=>(()=>{var o=Ot();return n(o,h),o})())};return Te()&&r()?(()=>{var c=Bt(),a=c.firstChild,h=a.nextSibling;return n(a,()=>u(0)),n(h,()=>u(1)),c})():(()=>{var c=At();return n(c,l),c})()}};var Ht=m('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),Rt=m('<button><span></span><div class="badge badge-sm">'),jt=m("<div>"),Ft=m("<span class=whitespace-nowrap>&nbsp;::&nbsp;"),Ut=m('<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="badge badge-sm ml-2"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-primary badge-sm"><span class=font-bold></span></div><div class="badge badge-secondary badge-sm">/s'),Wt=m("<img>"),zt=m('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),Yt=m('<div class="text-sm text-slate-500"> :: <!> ');const Zt=()=>{const i=at();if(!ct())return i("/setup",{replace:!0}),null;let t;const[r]=ne(),{fetchProxies:l,proxies:u,selectProxyInGroup:c,proxyProviders:a,updateProviderByProviderName:h,updateAllProvider:o,proxyGroupLatencyTest:S,proxyProviderLatencyTest:b,proxyGroupLatencyTestingMap:$,proxyProviderLatencyTestingMap:T,isAllProviderUpdating:O,updatingMap:x}=de(),L=w(()=>u().filter(f=>!f.hidden)),{speedGroupByName:B}=ot(),[_,E]=dt(le({}),{name:"collapsedMap",storage:localStorage}),R=(f,C)=>{E(G=>({...G,[f]:C}))};Pe(l);const V=async(f,C)=>{f.stopPropagation(),S(C)},U=f=>f.replace("<svg",~f.indexOf("xmlns")?"<svg":'<svg xmlns="http://www.w3.org/2000/svg"').replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/\{/g,"%7B").replace(/\}/g,"%7D").replace(/</g,"%3C").replace(/>/g,"%3E"),Q=(f,C)=>{f.stopPropagation(),b(C)},v=(f,C)=>{f.stopPropagation(),h(C)},D=async f=>{f.stopPropagation(),o()},[J,De]=le("proxies"),Ie=()=>[{type:"proxies",name:r("proxies"),count:L().length},{type:"proxyProviders",name:r("proxyProviders"),count:a().length}];return[e(mt,{get children(){return r("proxies")}}),(()=>{var f=Ht(),C=f.firstChild,G=C.firstChild,ue=G.nextSibling,ge=C.nextSibling;return n(G,e(H,{get each(){return Ie()},children:s=>(()=>{var N=Rt(),W=N.firstChild,g=W.nextSibling;return N.$$click=()=>De(s.type),n(W,()=>s.name),n(g,()=>s.count),y(()=>Ne(N,K(J()===s.type&&"tab-active","tab-sm sm:tab-md tab gap-2 px-2"))),N})()})),n(C,e(P,{get when(){return J()==="proxyProviders"},get children(){return e(q,{class:"btn btn-circle btn-sm",get disabled(){return O()},onClick:s=>D(s),get icon(){return e(xe,{get class(){return K(O()&&"animate-spin text-success")}})}})}}),ue),n(ue,e(q,{class:"btn-circle btn-primary btn-sm",onClick:()=>t==null?void 0:t.showModal(),get icon(){return e(ut,{})}})),n(ge,e(P,{get when(){return J()==="proxies"},get children(){return e(Ce,{get children(){return e(H,{get each(){return L()},children:s=>{const N=w(()=>gt(fe(s.all??[],ae()),Se())),W=(()=>{var g=Ut(),I=g.firstChild,A=I.firstChild,X=A.firstChild,ee=X.nextSibling,Z=I.nextSibling,ie=Z.firstChild,Me=ie.firstChild,ve=ie.nextSibling,ke=ve.firstChild;return n(A,e(P,{get when(){return s.icon},get children(){return e(P,{get when(){return s.icon.startsWith("data:image/svg+xml")},get fallback(){return(()=>{var d=Wt();return y(p=>{var z=s.icon,j=`${re()}px`,F=`${ce()}px`;return z!==p.e&&Ee(d,"src",p.e=z),j!==p.t&&((p.t=j)!=null?d.style.setProperty("height",j):d.style.removeProperty("height")),F!==p.a&&((p.a=F)!=null?d.style.setProperty("margin-right",F):d.style.removeProperty("margin-right")),p},{e:void 0,t:void 0,a:void 0}),d})()},get children(){var d=jt();return d.style.setProperty("color","oklch(var(--p) / var(--tw-bg-opacity))"),d.style.setProperty("background-color","currentColor"),d.style.setProperty("mask-size","100% 100%"),y(p=>{var z=`${re()}px`,j=`${re()}px`,F=`${ce()}px`,se=`url("${U(s.icon)}")`;return z!==p.e&&((p.e=z)!=null?d.style.setProperty("height",z):d.style.removeProperty("height")),j!==p.t&&((p.t=j)!=null?d.style.setProperty("width",j):d.style.removeProperty("width")),F!==p.a&&((p.a=F)!=null?d.style.setProperty("margin-right",F):d.style.removeProperty("margin-right")),se!==p.o&&((p.o=se)!=null?d.style.setProperty("mask-image",se):d.style.removeProperty("mask-image")),p},{e:void 0,t:void 0,a:void 0,o:void 0}),d}})}}),X),n(X,()=>s.name),n(ee,()=>{var d;return(d=s.all)==null?void 0:d.length}),n(I,e(q,{class:"btn-circle btn-sm",get disabled(){return $()[s.name]},onClick:d=>V(d,s.name),get icon(){return e(we,{get class(){return K($()[s.name]&&"animate-pulse text-success")}})}}),null),n(Me,()=>vt(s.type)),n(ie,e(P,{get when(){var d;return((d=s.now)==null?void 0:d.length)>0},get children(){var d=Ft();return d.firstChild,n(d,()=>s.now,null),d}}),null),n(ve,()=>oe(B()[s.name]??0).toString(),ke),n(g,e(P,{get when(){return!_()[s.name]},get children(){return e($e,{get proxyNameList(){return N()},get now(){return s.now}})}}),null),g})();return e(pe,{get isOpen(){return _()[s.name]},title:W,onCollapse:g=>R(s.name,g),get children(){return e(H,{get each(){return N()},children:g=>e(be,{proxyName:g,get isSelected(){return s.now===g},onClick:()=>void c(s,g)})})}})}})}})}}),null),n(ge,e(P,{get when(){return J()==="proxyProviders"},get children(){return e(Ce,{get children(){return e(H,{get each(){return a()},children:s=>{const N=w(()=>fe(s.proxies.map(g=>g.name)??[],ae())),W=[(()=>{var g=zt(),I=g.firstChild,A=I.firstChild,X=A.nextSibling,ee=I.nextSibling;return n(A,()=>s.name),n(X,()=>s.proxies.length),n(ee,e(q,{class:"btn btn-circle btn-sm",get disabled(){return x()[s.name]},onClick:Z=>v(Z,s.name),get icon(){return e(xe,{get class(){return K(x()[s.name]&&"animate-spin text-success")}})}}),null),n(ee,e(q,{class:"btn btn-circle btn-sm",get disabled(){return T()[s.name]},onClick:Z=>Q(Z,s.name),get icon(){return e(we,{get class(){return K(T()[s.name]&&"animate-pulse text-success")}})}}),null),g})(),e(It,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{var g=Yt(),I=g.firstChild,A=I.nextSibling;return A.nextSibling,n(g,()=>s.vehicleType,I),n(g,()=>r("updated"),A),n(g,()=>ft(s.updatedAt),null),g})(),e(P,{get when(){return!_()[s.name]},get children(){return e($e,{get proxyNameList(){return N()}})}})];return e(pe,{get isOpen(){return _()[s.name]},title:W,onCollapse:g=>R(s.name,g),get children(){return e(H,{get each(){return N()},children:g=>e(be,{proxyName:g})})}})}})}})}}),null),n(f,e(wt,{ref:s=>t=s}),null),f})()]};ht(["click"]);export{Zt as default};
